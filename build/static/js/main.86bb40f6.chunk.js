(this.webpackJsonpfroject1=this.webpackJsonpfroject1||[]).push([[0],{17:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(9),i=n.n(a),o=n(8),u=n(10),s=n(4),m=n(5),d=n(2),l=n.n(d),b=function(){var e=Object(m.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{id:"1",body:"First comment",username:"Artem",userId:"1",parentId:null,createdAt:"2022-01-18T23:00:33.010+02:00"},{id:"2",body:"Second comment",username:"Artur",userId:"2",parentId:null,createdAt:"2022-01-18T23:00:33.010+02:00"},{id:"3",body:"First comment first child",username:"Anton",userId:"2",parentId:"1",createdAt:"2022-01-18T23:00:33.010+02:00"},{id:"4",body:"Second comment second child",username:"Andrey",userId:"2",parentId:"2",createdAt:"2022-01-18T23:00:33.010+02:00"}]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(m.a)(l.a.mark((function e(t){var n,r=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:null,e.abrupt("return",{id:Math.random().toString(36).substr(2,9),body:t,parentId:n,userId:"1",username:"John",createdAt:(new Date).toISOString()});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(m.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{text:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(m.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=n(0),v=function(e){var t=e.handleSubmit,n=e.submitLabel,c=e.hasCancelButton,a=void 0!==c&&c,i=e.initialText,o=void 0===i?"":i,u=e.handleCancel,m=Object(r.useState)(o),d=Object(s.a)(m,2),l=d[0],b=d[1],j=0===l.length||l.length>=30;return Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(l),b("")},children:[Object(h.jsx)("textarea",{className:"comment-form-textarea",value:l,onChange:function(e){return b(e.target.value)}}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{className:"comment-form-button",disabled:j,children:n})}),a&&Object(h.jsx)("button",{type:"button",className:"comment-form-button comment-form-cancel-button",onClick:u,children:"Cancel"})]})},O=function e(t){var n=t.comment,r=t.addComment,c=t.replies,a=t.currentUserId,i=t.deleteComment,o=t.updateComment,u=t.activeComment,s=t.setActiveComment,m=t.parentId,d=void 0===m?null:m,l=new Date-new Date(n.createdAt)>3e5,b=Boolean(a),j=a===n.userId,f=a===n.userId&&!l,p=new Date(n.createdAt).toLocaleDateString(),O=u&&"replying"===u.type&&u.id===n.id,x=u&&"editing"===u.type&&u.id===n.id,C=d||n.id;return Object(h.jsxs)("div",{className:"comment",children:[Object(h.jsx)("div",{className:"comment-image-container",children:Object(h.jsx)("img",{src:"/user-icon.png",alt:"user"})}),Object(h.jsxs)("div",{className:"comment-right-part",children:[Object(h.jsxs)("div",{className:"comment-content",children:[Object(h.jsx)("div",{className:"comment-author",children:n.username}),Object(h.jsx)("div",{children:p})]}),!x&&Object(h.jsx)("div",{className:"comment-text",children:n.body}),x&&Object(h.jsx)(v,{submitLabel:"Update",hasCancelButton:!0,ibitialText:n.body,handleSubmit:function(e){return o(e,n.id)},handleCancel:function(){return s(null)}}),Object(h.jsxs)("div",{className:"comment-actions",children:[b&&Object(h.jsx)("div",{className:"comment-action",onClick:function(){return s({id:n.id,type:"replying"})},children:"Reply"}),j&&Object(h.jsx)("div",{className:"comment-action",onClick:function(){return s({id:n.id,type:"editing"})},children:"Edit"}),f&&Object(h.jsx)("div",{className:"comment-action",onClick:function(){return i(n.id)},children:"Delete"})]}),O&&Object(h.jsx)(v,{submitLabel:"Reply",handleSubmit:function(e){return r(e,C)}}),c.length>0&&Object(h.jsx)("div",{className:"replies",children:c.map((function(t){return Object(h.jsx)(e,{comment:t,replies:[],currentUserId:a,deleteComment:i,updateComment:o,parentId:n.id,activeComment:u,setActiveComment:s},t.id)}))})]})]})},x=function(e){var t=e.currentUserId,n=Object(r.useState)([]),c=Object(s.a)(n,2),a=c[0],i=c[1],m=Object(r.useState)(null),d=Object(s.a)(m,2),l=d[0],x=d[1],C=a.filter((function(e){return null===e.parentId})),g=function(e){window.confirm("Are you sure that you want to remove comment?")&&p(e).then((function(){var t=a.filter((function(t){return t.id!==e}));i(t)}))},y=function(e,t){j(e,t).then((function(e){i([e].concat(Object(u.a)(a))),x(null)}))},I=function(e,t){f(e,t).then((function(){var n=a.map((function(n){return n.id===t?Object(o.a)(Object(o.a)({},n),{},{body:e}):n}));i(n),x(null)}))};return Object(r.useEffect)((function(){b().then((function(e){i(e)}))}),[]),Object(h.jsxs)("div",{className:"comments",children:[Object(h.jsx)("h3",{className:"comments-title",children:"Comments"}),Object(h.jsx)("div",{className:"comment-form-title",children:"Write comment"}),Object(h.jsx)(v,{submitLabel:"Write",handleSubmit:y}),Object(h.jsx)("div",{className:"comments-container",children:C.map((function(e){return Object(h.jsx)(O,{comment:e,replies:(n=e.id,a.filter((function(e){return e.parentId===n})).sort((function(e,t){return new Date(e.createAt).getTime()-new Date(t.createAt).getTime()}))),currentUserId:t,deleteComment:g,updateComment:I,activeComment:l,setActiveComment:x,addComment:y},e.id);var n}))})]})};var C=function(){return Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(x,{currentUserId:"1"})})},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))};n(17);i.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(C,{})}),document.getElementById("root")),g()}},[[18,1,2]]]);
//# sourceMappingURL=main.86bb40f6.chunk.js.map