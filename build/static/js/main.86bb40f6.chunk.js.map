{"version":3,"sources":["api.js","Comments/CommentForm.js","Comments/Comment.js","Comments/Comments.js","App.js","reportWebVitals.js","index.js"],"names":["getComments","a","id","body","username","userId","parentId","createdAt","createComment","text","Math","random","toString","substr","Date","toISOString","updateComment","deleteComment","CommentForm","handleSubmit","submitLabel","hasCancelButton","initialText","handleCancel","useState","setText","isTextareaDisabled","length","onSubmit","e","preventDefault","className","value","onChange","target","disabled","type","onClick","Comment","comment","addComment","replies","currentUserId","activeComment","setActiveComment","timePassed","canReply","Boolean","canEdit","canDelete","toLocaleDateString","isReplying","isEditing","replyId","src","alt","ibitialText","map","reply","Comments","backendComments","setBackendComments","rootComments","filter","backendComment","commentId","window","confirm","deleteCommentApi","then","updatedBackendComments","createCommentApi","updateCommentApi","useEffect","getCommentsApi","data","rootComment","sort","b","createAt","getTime","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.86bb40f6.chunk.js","sourcesContent":["export const getComments = async () => {\r\n  return [\r\n    {\r\n      id: \"1\",\r\n      body: \"First comment\",\r\n      username: \"Artem\",\r\n      userId: \"1\",\r\n      parentId: null,\r\n      createdAt: \"2022-01-18T23:00:33.010+02:00\",\r\n    },\r\n    {\r\n      id: \"2\",\r\n      body: \"Second comment\",\r\n      username: \"Artur\",\r\n      userId: \"2\",\r\n      parentId: null,\r\n      createdAt: \"2022-01-18T23:00:33.010+02:00\",\r\n    },\r\n    {\r\n      id: \"3\",\r\n      body: \"First comment first child\",\r\n      username: \"Anton\",\r\n      userId: \"2\",\r\n      parentId: \"1\",\r\n      createdAt: \"2022-01-18T23:00:33.010+02:00\",\r\n    },\r\n    {\r\n      id: \"4\",\r\n      body: \"Second comment second child\",\r\n      username: \"Andrey\",\r\n      userId: \"2\",\r\n      parentId: \"2\",\r\n      createdAt: \"2022-01-18T23:00:33.010+02:00\",\r\n    },\r\n  ];\r\n};\r\n\r\nexport const createComment = async (text, parentId = null) => {\r\n  return {\r\n    id: Math.random().toString(36).substr(2, 9),\r\n    body: text,\r\n    parentId,\r\n    userId: \"1\",\r\n    username: \"John\",\r\n    createdAt: new Date().toISOString(),\r\n  };\r\n};\r\n\r\nexport const updateComment = async (text) => {\r\n  return { text };\r\n};\r\n\r\nexport const deleteComment = async () => {\r\n  return {};\r\n};","import React, { useState } from 'react'\r\n\r\nconst CommentForm = ({ handleSubmit, submitLabel,hasCancelButton = false, initialText='', handleCancel }) => {\r\n\tconst [text, setText] = useState(initialText)\r\n\r\n\t// disabled button when there not text\r\n\tconst isTextareaDisabled = text.length === 0 || text.length >= 30;\r\n\r\n\tconst onSubmit = (e) => {\r\n\t\te.preventDefault()\r\n\t\thandleSubmit(text)\r\n\t\tsetText('')\r\n\t}\r\n\treturn (\r\n\t\t<form onSubmit={onSubmit}>\r\n      \t<textarea \r\n      \t\tclassName='comment-form-textarea'\r\n      \t\tvalue={text}\r\n      \t\tonChange={(e) => setText(e.target.value)}\r\n      \t/>\r\n      \t<div>\r\n      \t\t<button className='comment-form-button' disabled={isTextareaDisabled}>\r\n      \t\t\t{submitLabel}\r\n      \t\t</button>\r\n      \t</div>\r\n      \t{hasCancelButton && (\r\n      \t\t<button \r\n      \t\t\ttype='button'\r\n      \t\t\tclassName='comment-form-button comment-form-cancel-button'\r\n      \t\t\tonClick={handleCancel}\r\n      \t\t>\r\n      \t\t\tCancel\r\n      \t\t</button>\r\n      \t)}\r\n\t\t</form>\r\n\t)\r\n}\r\n\r\nexport default CommentForm","import React from 'react'\r\nimport CommentForm from './CommentForm.js'\r\n\r\nconst Comment = ({ comment,\r\n\t  addComment,\r\n\t  replies,\r\n\t  currentUserId,\r\n\t  deleteComment,\r\n\t  updateComment,\r\n\t  activeComment,\r\n\t  setActiveComment,\r\n\t  parentId = null,\r\n\t  }) => {\r\n\tconst fiveMinutes = 300000;\r\n\tconst timePassed = new Date() - new Date(comment.createdAt) > fiveMinutes\r\n\tconst canReply = Boolean(currentUserId)\r\n\tconst canEdit = currentUserId === comment.userId\r\n\tconst canDelete = currentUserId === comment.userId && !timePassed\r\n\tconst createdAt = new Date(comment.createdAt).toLocaleDateString()\r\n\tconst isReplying = \r\n\t\tactiveComment && \r\n\t\tactiveComment.type === 'replying' &&\r\n\t\tactiveComment.id === comment.id\r\n\tconst isEditing = \r\n\t\tactiveComment && \r\n\t\tactiveComment.type === 'editing' &&\r\n\t\tactiveComment.id === comment.id\r\n\tconst replyId = parentId ? parentId : comment.id;\r\n\treturn (\r\n\t\t<div className='comment'>\r\n\t\t\t<div className='comment-image-container'>\r\n\t\t\t\t<img src=\"/user-icon.png\" alt=\"user\" />\r\n\t\t\t</div>\r\n\t\t\t<div className='comment-right-part'>\r\n\t\t\t\t<div className='comment-content'>\r\n\t\t\t\t\t<div className='comment-author'>{comment.username}</div>\r\n\t\t\t\t\t<div>{createdAt}</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{!isEditing && <div className='comment-text'>{comment.body}</div>}\r\n\t\t\t\t{isEditing && (\r\n\t\t\t\t\t<CommentForm \r\n\t\t\t\t\t\tsubmitLabel='Update' \r\n\t\t\t\t\t\thasCancelButton \r\n\t\t\t\t\t\tibitialText={comment.body} \r\n\t\t\t\t\t\thandleSubmit={(text) => updateComment(text, comment.id)}\r\n\t\t\t\t\t   handleCancel={() => setActiveComment(null)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t\t<div className='comment-actions'>\r\n\t\t\t\t\t{canReply && <div className='comment-action'\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => \r\n\t\t\t\t\t\t\t\t\t\t\t\tsetActiveComment({id: comment.id, type: 'replying'})}>Reply</div>}\r\n\t\t\t\t\t{canEdit && <div className='comment-action' \r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => \r\n\t\t\t\t\t\t\t\t\t\t\t\tsetActiveComment({id: comment.id, type: 'editing'})}>Edit</div>}\r\n\t\t\t\t\t{canDelete && <div \r\n\t\t\t\t\t\t\t\t\t\t className='comment-action'\r\n\t\t\t\t\t\t\t\t\t\t onClick={() => deleteComment(comment.id)}>Delete</div>}\r\n\t\t\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t{isReplying && (\r\n\t\t\t\t\t\t\t<CommentForm\r\n\t\t\t\t\t\t\t\tsubmitLabel='Reply'\r\n\t\t\t\t\t\t\t\thandleSubmit={(text) => addComment(text, replyId)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t{replies.length > 0 && (\r\n\t\t\t\t\t<div className='replies'>\r\n\t\t\t\t\t\t{replies.map(reply => (\r\n\t\t\t\t\t\t\t<Comment\r\n\t\t\t\t\t\t\t\tcomment={reply}\r\n\t\t\t\t\t\t\t\tkey={reply.id}\r\n\t\t\t\t\t\t\t\treplies={[]}\r\n\t\t\t\t\t\t\t\tcurrentUserId={currentUserId}\r\n\t\t\t\t\t\t\t\tdeleteComment={deleteComment}\r\n\t\t\t\t\t\t\t\tupdateComment={updateComment}\r\n\t\t\t\t\t\t\t\tparentId={comment.id}\r\n\t\t\t\t\t\t\t\tactiveComment={activeComment}\r\n\t\t\t\t\t\t\t\tsetActiveComment={setActiveComment}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Comment","import React, { useState, useEffect } from 'react'\r\nimport { getComments as getCommentsApi,\r\n\t\t createComment as createCommentApi,\r\n\t\t deleteComment as deleteCommentApi,\r\n\t\t updateComment as updateCommentApi } from '../api'\r\nimport Comment from './Comment.js'\r\nimport CommentForm from './CommentForm.js'\r\n\r\nconst Comments = ({ currentUserId }) => {\r\n\tconst [backendComments, setBackendComments] = useState([])\r\n\tconst [activeComment, setActiveComment] = useState(null)\r\n\r\n\tconst rootComments = backendComments.filter((backendComment) => backendComment.parentId === null)\r\n\r\n//comments add the top\r\n\tconst getReplies = (commentId) => { \r\n\t\treturn backendComments\r\n\t\t.filter((backendComment) => backendComment.parentId === commentId)\r\n\t\t.sort((a, b) => new Date(a.createAt).getTime() - new Date(b.createAt).getTime())\r\n\t}\r\n\r\n\tconst deleteComment = (commentId) => {\r\n\t\tif (window.confirm('Are you sure that you want to remove comment?')) {\r\n\t\t\tdeleteCommentApi(commentId).then(() => {\r\n\t\t\t\tconst updatedBackendComments = backendComments\r\n\t\t\t\t.filter(backendComment => backendComment.id !== commentId);\r\n\t\t\t\tsetBackendComments(updatedBackendComments)\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tconst addComment = (text, parentId) => {\r\n\t\tcreateCommentApi(text, parentId).then(comment => {\r\n\t\t\tsetBackendComments([comment, ...backendComments])\r\n\t\t\tsetActiveComment(null)\r\n\t\t})\r\n\t}\r\n\r\n\tconst updateComment = (text, commentId) => {\r\n\t\tupdateCommentApi(text, commentId).then(() => {\r\n\t\t\tconst updatedBackendComments = backendComments.map(backendComment => {\r\n\t\t\t\tif (backendComment.id === commentId) {\r\n\t\t\t\t\treturn {...backendComment, body: text}\r\n\t\t\t\t}\r\n\t\t\treturn backendComment\r\n\t\t\t})\r\n\t\t\tsetBackendComments(updatedBackendComments)\r\n\t\t\tsetActiveComment(null)\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tgetCommentsApi().then((data) => {\r\n\t\t\tsetBackendComments(data);\r\n\t\t})\r\n\t}, [])\r\n\r\n\treturn (\r\n\t\t<div className='comments'>\r\n\t\t\t<h3 className='comments-title'>Comments</h3>\r\n\t\t\t<div className='comment-form-title'>Write comment</div>\r\n\t\t\t<CommentForm submitLabel='Write' handleSubmit={addComment} />\r\n\t\t\t<div className='comments-container'>\r\n\t\t\t\t{rootComments.map((rootComment) => (\r\n\t\t\t\t\t<Comment\r\n\t\t\t\t\t key={rootComment.id}\r\n\t\t\t\t\t comment={rootComment}\r\n\t\t\t\t\t replies={getReplies(rootComment.id)}\r\n\t\t\t\t\t currentUserId={currentUserId}\r\n\t\t\t\t\t deleteComment={deleteComment}\r\n\t\t\t\t\t updateComment={updateComment}\r\n\t\t\t\t\t activeComment={activeComment}\r\n\t\t\t\t\t setActiveComment={setActiveComment}\r\n\t\t\t\t\t addComment={addComment}\r\n\t\t\t\t\t />\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Comments","import Comments from './Comments/Comments.js'\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n     <Comments currentUserId='1' />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport './index.css';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\nreportWebVitals();"],"sourceRoot":""}